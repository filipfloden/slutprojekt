<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <link rel="stylesheet" type="text/css" href="main.css">
  </head>
  <body>

    <div id="gameArea">
        <center>
        <h1>Sushi Clicker!</h1>

        <h1 id="clicks">0</h1>
        <img id="sushi" class="make-bigger" src="bilder/sushi.png" width="150px" height="120px">
        </center>
    </div>
    
    
    <br>
    <input type="button" id="action-btn" value="Retrieve 10 first rows in the database" />
    <table id="table" style="border: solid 1px black;">
        <tbody>
            
        </tbody>
    </table>

    <script>
      // You can also require other files to run in this process
      require('./renderer.js')
    </script>


    <script>
        var count = 0;
        var sushi = document.getElementById('sushi');
        sushi.addEventListener('click', function(e){ 
            sushi.classList.remove('make-bigger');

            void sushi.offsetWidth;

            sushi.classList.add('make-bigger');
            
            count++;
            document.getElementById('clicks').innerHTML = count; 
        }, false); 
    </script>

<script>
  var mysql = require('mysql');

function el(selector) {
    return document.getElementById(selector);
}

el('action-btn').addEventListener('click', function(){
    // Get the mysql service
    getFirstTenRows(function(rows){
        var html = '';

        rows.forEach(function(highscore){
            html += '<tr>';
            html += '<td>';
            html += highscore.id;
            html += '</td>';
            html += '<td>';
            html += highscore.user;
            html += '</td>';
            html += '<td>';
            html += highscore.highscore;
            html += '</td>';
            html += '</tr>';
            console.log(highscore);
        });

        document.querySelector('#table > tbody').innerHTML = html;
    });
},false);

function getFirstTenRows(callback){
    var mysql = require('mysql');

    // Add the credentials to access your database
    var connection = mysql.createConnection({
        host     : 'localhost',
        user     : 'root',
        password : null,
        database : 'windows_app'
    });

    // connect to mysql
    connection.connect(function(err) {
        // in case of error
        if(err){
            console.log(err.code);
            console.log(err.fatal);
        }
    });

    // Perform a query
    $query = "INSERT INTO `stats` WHERE `id=1` (`sushis`, `upgrade1`, `upgrade2`, `upgrade3`, `upgrade4`, `upgrade5`, `price1`, `price2`, `price3`, `price4`, `price5`) VALUES ([value-1],[value-2],[value-3],[value-4],[value-5],[value-6],[value-7],[value-8],[value-9],[value-10],[value-11],[value-12])"

    connection.query($query, function(err, rows, fields) {
        if(err){
            console.log("An error ocurred performing the query.");
            console.log(err);
            return;
        }

        callback(rows);

        console.log("Query succesfully executed");
    });

    // Close the connection
    connection.end(function(){
        // The connection has been closed
    });
}
</script>
  </body>
</html>
